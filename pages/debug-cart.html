<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tienda de productos comseticos">
    <meta name="keywords" content="natura, tienda, avon, arbell, belleza, cosm√©tica">
    <meta name="author" content="Lorena Fusillo">
    <title>Debug - Carrito</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }

        .debug-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #333;
            border-bottom: 2px solid #ff6b35;
            padding-bottom: 10px;
        }

        pre {
            background: #f8f8f8;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }

        button {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }

        button:hover {
            background: #e55a2b;
        }
    </style>
</head>

<body>
    <div class="debug-box">
        <h1>Lorena Fusillo <br>Cosmetica</h1>
        <h2>üîç Debug del Carrito</h2>
        <button onclick="checkCart()">Verificar Carrito</button>
        <button onclick="addTestProduct()">Agregar Producto de Prueba</button>
        <button onclick="clearCart()">Limpiar Carrito</button>
    </div>

    <div class="debug-box">
        <h2>üì¶ Contenido del LocalStorage</h2>
        <pre id="cart-content">Haz clic en "Verificar Carrito" para ver el contenido</pre>
    </div>

    <div class="debug-box">
        <h2>üìä An√°lisis</h2>
        <pre id="cart-analysis">-</pre>
    </div>

    <script>
        function checkCart() {
            const cartData = localStorage.getItem('cart');
            const contentEl = document.getElementById('cart-content');
            const analysisEl = document.getElementById('cart-analysis');

            if (!cartData) {
                contentEl.textContent = 'No hay datos de carrito en localStorage';
                analysisEl.textContent = 'El carrito est√° vac√≠o o no existe';
                return;
            }

            try {
                const cart = JSON.parse(cartData);
                contentEl.textContent = JSON.stringify(cart, null, 2);

                // An√°lisis
                let analysis = '';
                analysis += `Tipo de estructura: ${Array.isArray(cart) ? 'Array directo' : 'Objeto con items'}\n`;

                if (cart.items) {
                    analysis += `Cantidad de items: ${cart.items.length}\n\n`;
                    if (cart.items.length > 0) {
                        analysis += 'Primer item:\n';
                        const item = cart.items[0];
                        analysis += `  - ID: ${item.id}\n`;
                        analysis += `  - Nombre: ${item.name || item.title || 'N/A'}\n`;
                        analysis += `  - Precio: ${item.price || item.unit_price || 'N/A'}\n`;
                        analysis += `  - Cantidad: ${item.quantity}\n`;
                        analysis += `  - Campos disponibles: ${Object.keys(item).join(', ')}\n`;
                    }
                } else if (Array.isArray(cart)) {
                    analysis += `Cantidad de items: ${cart.length}\n`;
                } else {
                    analysis += 'Estructura desconocida\n';
                }

                analysisEl.textContent = analysis;
            } catch (error) {
                contentEl.textContent = `Error al parsear: ${error.message}`;
                analysisEl.textContent = 'No se pudo analizar el carrito';
            }
        }

        function addTestProduct() {
            const cart = {
                items: [
                    {
                        id: 'test-1',
                        name: 'Producto de Prueba',
                        price: 100,
                        quantity: 1,
                        image: 'test.jpg',
                        brand: 'Test'
                    }
                ]
            };

            localStorage.setItem('cart', JSON.stringify(cart));
            alert('Producto de prueba agregado');
            checkCart();
        }

        function clearCart() {
            localStorage.removeItem('cart');
            alert('Carrito limpiado');
            checkCart();
        }

        // Auto-check on load
        window.onload = checkCart;
    </script>
</body>

</html>